```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    TURN-BASED BATTLE SYSTEM ARCHITECTURE                  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

## ğŸ—ï¸ SYSTEM ARCHITECTURE

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         GAME APPLICATION LAYER                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  BattleSimulator (Interactive)              BattleDemo (Automated)     â”‚
â”‚  - Player input handling                    - AI decision making        â”‚
â”‚  - Character selection                      - Automated demo            â”‚
â”‚  - Turn prompt                              - Statistics display        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         BATTLE ENGINE CORE                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                            Battle.java                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ Key Methods:                                                     â”‚  â”‚
â”‚  â”‚ â€¢ start() â†’ determineTurnOrder() â†’ initialize battle             â”‚  â”‚
â”‚  â”‚ â€¢ executePlayerAction() â†’ skill validation â†’ execution           â”‚  â”‚
â”‚  â”‚ â€¢ processStatusEffects() â†’ update all active effects             â”‚  â”‚
â”‚  â”‚ â€¢ endTurn() â†’ shift turn, regenerate FP                          â”‚  â”‚
â”‚  â”‚ â€¢ isBattleFinished() â†’ check victory conditions                  â”‚  â”‚
â”‚  â”‚ â€¢ displayStatus() â†’ visual battle state                          â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                                      â”‚
        â”‚                                                      â”‚
        â–¼                                                      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      State Management Layer          â”‚   â”‚   Logging & Event Layer      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  BattleState (Enum)                  â”‚   â”‚  BattleLog.java              â”‚
â”‚  - WAITING                           â”‚   â”‚  - Stores all actions        â”‚
â”‚  - PLAYER1_TURN                      â”‚   â”‚  - Manages log records       â”‚
â”‚  - PLAYER2_TURN                      â”‚   â”‚  - Display capabilities      â”‚
â”‚  - FINISHED                          â”‚   â”‚                              â”‚
â”‚                                      â”‚   â”‚  BattleAction.java           â”‚
â”‚  Manages flow control & validation   â”‚   â”‚  - Action metadata           â”‚
â”‚                                      â”‚   â”‚  - Damage/Healing tracking   â”‚
â”‚                                      â”‚   â”‚  - Timestamp recording       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                            â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    CHARACTER & ENTITY LAYER                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  BaseCharacter (Abstract)                                               â”‚
â”‚  â”œâ”€ name, HP, FP, ATK, DEF, SPD                                         â”‚
â”‚  â”œâ”€ skills: List<Skill>                                                â”‚
â”‚  â”œâ”€ activeEffects: List<StatusEffect>                                   â”‚
â”‚  â”œâ”€ Methods:                                                            â”‚
â”‚  â”‚  â€¢ takeDamage() / takeDamageWithMechanics()                          â”‚
â”‚  â”‚  â€¢ heal()                                                            â”‚
â”‚  â”‚  â€¢ useFocusPoints() / regenFocusPoints()                             â”‚
â”‚  â”‚  â€¢ addEffect() / processEffects() / updateStatusEffects()            â”‚
â”‚  â”‚  â€¢ canMove()                                                         â”‚
â”‚  â””â”€ getActiveEffectNames()                                              â”‚
â”‚                                                                         â”‚
â”‚  Concrete Character Implementations:                                    â”‚
â”‚  â”œâ”€ FireCharacter      (HP:100, ATK:35, DEF:15, SPD:30) ğŸ”¥             â”‚
â”‚  â”œâ”€ WaterCharacter     (HP:120, ATK:25, DEF:25, SPD:10) ğŸ’§             â”‚
â”‚  â”œâ”€ EarthCharacter     (HP:140, ATK:25, DEF:30, SPD:5)  ğŸŒ             â”‚
â”‚  â””â”€ WindCharacter      (HP:90,  ATK:30, DEF:10, SPD:50) ğŸ’¨             â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                          â”‚                              â”‚
                                          â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         SKILL EXECUTION LAYER                     â”‚  â”‚  EFFECT SYSTEM   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                   â”‚  â”‚                  â”‚
â”‚  Skill (Interface)                                â”‚  â”‚ StatusEffect     â”‚
â”‚  â”œâ”€ getName()                                    â”‚  â”‚ â”œâ”€ apply()       â”‚
â”‚  â”œâ”€ getFpCost()                                  â”‚  â”‚ â”œâ”€ tick()        â”‚
â”‚  â””â”€ use(user, target)                            â”‚  â”‚ â”œâ”€ remove()      â”‚
â”‚                                                   â”‚  â”‚ â””â”€ decreaseDur() â”‚
â”‚  Common Skills:                                   â”‚  â”‚                  â”‚
â”‚  â”œâ”€ AttackSkill      (0 FP)                       â”‚  â”‚ Concrete Effects:â”‚
â”‚  â”œâ”€ GuardSkill       (0 FP)                       â”‚  â”‚ â”œâ”€ BurnEffect   â”‚
â”‚  â””â”€ HealSkill        (10 FP)                      â”‚  â”‚ â”‚  (5 dmg/turn)  â”‚
â”‚                                                   â”‚  â”‚ â”œâ”€ FreezeEffect â”‚
â”‚  Elemental Skills (Special):                      â”‚  â”‚ â”‚  (skip turn)   â”‚
â”‚  â”œâ”€ FireballSkill    (25 FP) â†’ Burn Effect       â”‚  â”‚ â””â”€ AttackBuffEffâ”‚
â”‚  â”œâ”€ IceBlastSkill    (30 FP) â†’ Freeze Effect     â”‚  â”‚                  â”‚
â”‚  â”œâ”€ RockThrowSkill   (20 FP)                      â”‚  â”‚ EffectType Enum:â”‚
â”‚  â””â”€ AirSlashSkill    (25 FP)                      â”‚  â”‚ â”œâ”€ DAMAGE       â”‚
â”‚                                                   â”‚  â”‚ â”œâ”€ CROWD_CONTROLâ”‚
â”‚                                                   â”‚  â”‚ â”œâ”€ BUFF         â”‚
â”‚                                                   â”‚  â”‚ â””â”€ DEBUFF       â”‚
â”‚                                                   â”‚  â”‚                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                                                          â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                       â”‚
                                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UTILITY LAYER                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  ElementalAdvantage (Utility)                                            â”‚
â”‚  â”œâ”€ getMultiplier(attacker, defender) â†’ 0.75, 1.0, or 1.5              â”‚
â”‚  â””â”€ getEffectivenessMessage()                                           â”‚
â”‚                                                                          â”‚
â”‚  ElementType (Enum)                                                      â”‚
â”‚  â”œâ”€ FIRE   â”€â”€â”                                                           â”‚
â”‚  â”œâ”€ WATER  â”€â”€â”¼â”€ Rock-Paper-Scissors cycle                              â”‚
â”‚  â”œâ”€ EARTH  â”€â”€â”¤                                                           â”‚
â”‚  â”œâ”€ WIND   â”€â”€â”˜                                                           â”‚
â”‚  â””â”€ NEUTRAL                                                              â”‚
â”‚                                                                          â”‚
â”‚  Constants.java (Configuration)                                          â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š DATA FLOW DIAGRAM

### Battle Initialization Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   START     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Create Battle(p1, p2)        â”‚
â”‚ BattleState = WAITING        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ battle.start()               â”‚
â”‚ - determine Turn Order       â”‚
â”‚ - check speed diff           â”‚
â”‚ - if equal: coin flip        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Set CurrentState:            â”‚
â”‚ PLAYER1_TURN or PLAYER2_TURN â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ MAIN LOOP    â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Turn Execution Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ displayStatus()                     â”‚
â”‚ - Show HP bars, FP bars             â”‚
â”‚ - Show active effects               â”‚
â”‚ - Show available skills             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check canMove()                     â”‚
â”‚ - Frozen? â†’ Skip turn               â”‚
â”‚ - Continue: get skill input         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ executePlayerAction(skillIndex)     â”‚
â”‚ - Validate skill index              â”‚
â”‚ - Check FP >= FpCost                â”‚
â”‚ - Execute: skill.use(user, target)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Skill Executes â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
        â”‚ â€¢ Calculate damage
        â”‚ â€¢ Check dodge
        â”‚ â€¢ Check crit
        â”‚ â€¢ Apply elem bonus
        â”‚ â€¢ Apply defense
        â”‚ â€¢ Add effect
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ processStatusEffects()               â”‚
â”‚ - Tick all active effects            â”‚
â”‚ - Apply damage/effects               â”‚
â”‚ - Remove expired effects             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ isBattleFinished()?                 â”‚
â”‚ - HP <= 0? â†’ END BATTLE              â”‚
â”‚ - Surrender? â†’ END BATTLE            â”‚
â”‚ - Continue: next turn                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ endTurn()                            â”‚
â”‚ - Switch player (P1â†”P2)              â”‚
â”‚ - Increment turn counter             â”‚
â”‚ - Regenerate FP (+10)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
         Loop back to displayStatus()
```

### Damage Calculation Pipeline
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Raw Damage = ATK     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Check Critical Hit?                  â”‚
â”‚ Chance = Speed / 4.0 (max 25%)       â”‚
â”‚ If crit: damage *= 1.5               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Apply Elemental Multiplier            â”‚
â”‚ 0.75x (disadvantage)                  â”‚
â”‚ 1.0x  (neutral)                       â”‚
â”‚ 1.5x  (advantage)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Apply Defense                         â”‚
â”‚ finalDamage = damage - defense        â”‚
â”‚ min(0)                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Apply to Target HP                    â”‚
â”‚ target.HP -= finalDamage              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Dodge Check Flow
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ dodgeChance = (defender.speed  â”‚
â”‚   - attacker.speed) / 100 * 100â”‚
â”‚ max = 30%                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ random() * 100 < dodgeChance?  â”‚
â”‚ YES â†’ "Dodge! Attack missed"   â”‚
â”‚ NO â†’ Damage applied            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ CLASS RELATIONSHIPS

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚   Battle     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚ BattleState  â”‚                 â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚  â”‚ - state      â”‚                                          â”‚
â”‚  â”‚ - turnCount  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚ - player1    â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”‚ BaseCharacterâ”‚                 â”‚
â”‚  â”‚ - player2    â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚  â”‚ - battleLog  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚                                â”‚
â”‚         â”‚                 â”‚                                â”‚
â”‚         â–¼                 â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚                                â”‚
â”‚  â”‚ BattleLog    â”‚         â”‚                                â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚                                â”‚
â”‚  â”‚ - actions[]  â”‚         â”‚                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚                                â”‚
â”‚         â”‚                 â”‚                                â”‚
â”‚         â–¼                 â”‚                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚                                â”‚
â”‚  â”‚BattleAction  â”‚         â”‚                                â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚                                â”‚
â”‚  â”‚ - actor      â”‚         â”‚                                â”‚
â”‚  â”‚ - skill      â”‚         â”‚                                â”‚
â”‚  â”‚ - damage     â”‚         â”‚                                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚                                â”‚
â”‚                           â”‚                                â”‚
â”‚         BaseCharacterâ—„â”€â”€â”€â”€â”˜                                â”‚
â”‚         â”œâ”€ FireCharacter                                   â”‚
â”‚         â”œâ”€ WaterCharacter                                  â”‚
â”‚         â”œâ”€ EarthCharacter                                  â”‚
â”‚         â”œâ”€ WindCharacter                                   â”‚
â”‚         â”‚                                                  â”‚
â”‚         â”œâ”€ skills: Listâ—„â”€â”€â”€â”€â”                              â”‚
â”‚         â”‚                   â”‚                              â”‚
â”‚         â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚         â”‚     â”‚                           â”‚               â”‚
â”‚         â”‚     â–¼                           â–¼               â”‚
â”‚         â”‚  Skill (Interface)              â”‚               â”‚
â”‚         â”‚  â”œâ”€ AttackSkill                 â”‚               â”‚
â”‚         â”‚  â”œâ”€ GuardSkill                  â”‚               â”‚
â”‚         â”‚  â”œâ”€ HealSkill                   â”‚               â”‚
â”‚         â”‚  â””â”€ *Elemental Skills           â”‚               â”‚
â”‚         â”‚     â”œâ”€ FireballSkill            â”‚               â”‚
â”‚         â”‚     â”œâ”€ IceBlastSkill            â”‚               â”‚
â”‚         â”‚     â”œâ”€ RockThrowSkill           â”‚               â”‚
â”‚         â”‚     â””â”€ AirSlashSkill            â”‚               â”‚
â”‚         â”‚                                  â”‚               â”‚
â”‚         â””â”€ activeEffects: Listâ—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤               â”‚
â”‚                                           â”‚               â”‚
â”‚              StatusEffect (Abstract)â—„â”€â”€â”€â”€â”€â”˜               â”‚
â”‚              â”œâ”€ BurnEffect                                â”‚
â”‚              â””â”€ FreezeEffect                              â”‚
â”‚                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ DESIGN PATTERNS USED

### 1. **State Pattern** (BattleState)
```
Purpose: Track battle state transitions
Implementation: Enum BattleState {WAITING, PLAYER1_TURN, ...}
Benefit: Clear state management, prevents invalid transitions
```

### 2. **Strategy Pattern** (Skill interface)
```
Purpose: Different skill implementations
Implementation: Skill interface with multiple implementations
Benefit: Easy to add new skills, polymorphic execution
```

### 3. **Observer Pattern** (BattleLog)
```
Purpose: Record and replay events
Implementation: BattleLog observes all actions
Benefit: Decoupled logging, can extend with reports
```

### 4. **Template Method** (BaseCharacter)
```
Purpose: Define battle character structure
Implementation: Abstract class with abstract methods
Benefit: Consistent character interface, customizable skills
```

### 5. **Decorator Pattern** (Status Effects)
```
Purpose: Add effects to characters
Implementation: StatusEffect wrapper pattern
Benefit: Can stack effects, easy to add new effects
```

### 6. **Factory Pattern** (BattleSimulator)
```
Purpose: Create character instances
Implementation: Switch statement creating characters
Benefit: Centralized character creation
```

---

## ğŸ“ˆ PERFORMANCE CHARACTERISTICS

| Operation | Complexity | Notes |
|-----------|-----------|-------|
| Turn execution | O(n) | n = number of active effects |
| Skill selection | O(1) | Direct array access |
| Damage calculation | O(1) | Fixed set of operations |
| Battle log | O(1) | Capped at 100 entries |
| Status effect update | O(n) | n = active effects (usually 1-3) |
| Victory check | O(1) | Simple HP comparison |

**Memory**: ~5-10 KB per battle (excluding display)

---

## ğŸ” Thread Safety

Current implementation: **Single-threaded**
- All operations happen sequentially
- No concurrent modifications

If future multiplayer online:
- Use synchronized collections
- Add thread-safe queue for battle commands
- Implement message passing for turn validation

---

## ğŸš€ SCALABILITY ROADMAP

```
Level 1: Current (Single Player, 1v1)
â”œâ”€ Interactive mode: âœ…
â””â”€ Demo mode: âœ…

Level 2: Local Multiplayer
â”œâ”€ Split screen display
â”œâ”€ Controller input support
â””â”€ Tournament mode

Level 3: Online Multiplayer
â”œâ”€ Network serialization
â”œâ”€ Latency compensation
â””â”€ Server-side battle validation

Level 4: Advanced Features
â”œâ”€ Item system
â”œâ”€ Leveling/Experience
â”œâ”€ Skill trees
â””â”€ Campaign mode

Level 5: Meta Game
â”œâ”€ Rank/Rating system
â”œâ”€ Cosmetics/Skins
â”œâ”€ Seasonal updates
â””â”€ Esports integration
```

---

## ğŸ“¦ DEPLOYMENT

```
Development:
â”œâ”€ mvn clean compile
â”œâ”€ mvn test
â””â”€ java -cp target/classes com.game.battle.BattleSimulator

Distribution:
â”œâ”€ mvn package
â”œâ”€ java -jar target/TurnBaseGameJava-1.0-SNAPSHOT.jar
â””â”€ OR create standalone executable with Maven Assembly Plugin
```

---

**Architecture Version**: 1.0
**Last Updated**: 2025
**Status**: Production Ready âœ…
